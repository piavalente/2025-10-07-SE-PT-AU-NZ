<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini Project 1</title>
    <!--BOOTSTRAP CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous"/>
    <!--GOOGLE FONTS-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&display=swap" rel="stylesheet">
    <!--CSS-->
    <link rel="stylesheet" href="MiniProject1.css">
    <!--ICONS-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  </head>
  <body>
    <!--BOOTSTRAP JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

    <!--NAVBAR-->
    <nav class="navbar navbar-expand-lg bg-body-tertiary" style="border-bottom: 2px solid white; ">
        <div class="container-fluid">
            <a class="navbar-brand" href="https://www.capitalcitypreschool.co.nz">Preschool Website</a>
            
        <!--HAMBURGER MENU WHEN SCREEN IS MINIMIZED-->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                <!--DROPDOWN FOR BOOKS-->
                <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Books</a>
                    <ul class="dropdown-menu" style="background-color: #f4eae0; border: none">
                        <li><a class="dropdown-category-item" href="#">All</a></li>
                        <li><a class="dropdown-category-item" href="#">Celebrations and Holidays</a></li>
                        <li><a class="dropdown-category-item" href="#">Concept Books</a></li>
                        <li><a class="dropdown-category-item" href="#">Fantasy</a></li>
                        <li><a class="dropdown-category-item" href="#">Humorous</a></li>
                        <li><a class="dropdown-category-item" href="#">Maori</a></li>
                        <li><a class="dropdown-category-item" href="#">Nature and Animals</a></li>
                        <li><a class="dropdown-category-item" href="#">Realistic Fiction</a></li>
                        <li><a class="dropdown-category-item" href="#">Socio Emotional</a></li>
                        <li><a class="dropdown-category-item" href="#">Vehicles</a></li>
                    </ul>
                </li>
                <!--DROPDOWN FOR AUTHORS-->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Authors</a>
                    <ul class="dropdown-menu" style="background-color: #f4eae0; border: none">
                        <li><a class="dropdown-author-item" href="#">All</a></li>
                        <li><a class="dropdown-author-item" href="#">Craig Smith</a></li>
                        <li><a class="dropdown-author-item" href="#">Deanno Yipadee</a></li>
                        <li><a class="dropdown-author-item" href="#">Eric Carle</a></li>
                        <li><a class="dropdown-author-item" href="#">Julia Donaldson</a></li>
                        <li><a class="dropdown-author-item" href="#">Lynley Todd</a></li>
                        <li><a class="dropdown-author-item" href="#">Peter Gossage</a></li>
                        <li><a class="dropdown-author-item" href="#">Rebekah Lipp</a></li>
                    </ul>
                </li>
                <!--FAVOURITES-->
                <li class="nav-item">
                    <a class="nav-link" href="#">Favourites</a>
                </li>
            
                <!--SEARCH BUTTON-->
            </ul>
                <form class="d-flex" role="search" id="searchForm">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchInput"/>
                    <button class="btn btn-outline-dark" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>


    <!--HEADING-->

    <h1 class="display-3 text-center mb-4 mt-4">Preschool Book Catalogue</h1>

    <!--CAROUSEL-->
    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="./BookQuotes/Quote1.png" class="d-block w-100" style="height: 250px" alt="..."> <!--ADDED STYLE-->
            </div>
            <div class="carousel-item">
                <img src="./BookQuotes/Quote2.png" class="d-block w-100" style="height: 250px"alt="...">
            </div>
            <div class="carousel-item">
                <img src="./BookQuotes/Quote3.png" class="d-block w-100" style="height: 250px"alt="...">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
</div>

    <!--CONTAINER FOR BOOK CARDS-->
    <div class="container px-lg-5 my-5">
      <div class="row" id="book-catalogue"></div>
    </div>

    <!--CARD TEMPLATE FOR BOOKS -->
    <template id="Book-template">
      <div class="col-12 col-md-6 col-lg-3 mb-4">
        <div class="card h-100" style="border:none"> <!--card-->
            <img src="" class="card-img-top img-fluid" style="height: 250px"/> <!--image-->
            <div class="card-body d-flex flex-column flex-grow-1" style="background-color:#ffe8af">
                <h5 class="card-title"></h5>
                <p class="card-text"></p>
                <a href="#" class="btn btn-primary w-100 mt-auto view-button">View Resources</a> <!--button-->
          </div>
        </div>
      </div>
    </template>

    <!--SCRIPT-->
    <script>
    let allBooks = []; // This is the filtered array

    // Function to add books to the page
    function addBooks(bookImage, bookTitle, bookAuthor, bookButton) {
        const template = document.getElementById("Book-template").content.cloneNode(true);
        template.querySelector(".card-img-top").src = bookImage;
        template.querySelector(".card-title").innerText = bookTitle;
        template.querySelector(".card-text").innerText = bookAuthor;
        template.querySelector(".view-button").href = bookButton;
        
        // Append the book card to the catalogue
        document.querySelector("#book-catalogue").appendChild(template);
    }

    // Function to display books
    function displayBooks(books) {
        document.querySelector("#book-catalogue").innerHTML = "";  // Clear previous books
        books.forEach(book => 
            addBooks(book.Image, book.Title, book.Author, book.Button)  // Pass book info to addBooks
        );
    }


    // FETCH BOOKS
    fetch("./BookEntries/BookEntries.json")
        .then(response => response.json())
        .then(books => {
            allBooks = books;
            displayBooks(allBooks);
        })
        .catch(error => console.error(error));

    // FILTER BOOKS
    const dropdownBooks = document.querySelectorAll(".dropdown-category-item"); // finds all dropdown book items

    dropdownBooks.forEach(item => {
        item.addEventListener("click", function (event) {
        event.preventDefault();

        let category = this.innerText.trim().toLowerCase();
        let filteredBooks;

        //console.log("Clicked category:", category); //to check on console

        if (category === "all") {
            filteredBooks = allBooks;
        } else {
            filteredBooks = allBooks.filter(book => {
                
            // If Category is an array
            if (Array.isArray(book.Category)) {
                return book.Category.some(Category => Category.toLowerCase() === category);
                } 
            });
        }

        displayBooks(filteredBooks);
        });     
    });

    // FILTER AUTHORS
    const dropdownAuthors = document.querySelectorAll(".dropdown-author-item"); // finds all dropdown author items

    dropdownAuthors.forEach(item => {
        item.addEventListener("click", function (event) {
        event.preventDefault();

        let author = this.innerText.trim().toLowerCase();
        let filteredBooks;

        //console.log("Clicked author:", author); // check which author was clicked

        if (author === "all") {
            filteredBooks = allBooks;
        } else {
            filteredBooks = allBooks.filter(book => {

            if (Array.isArray(book.Author)) {
                return book.Author.some(Author => Author.toLowerCase() === author);
          
                }
            });
        }

        displayBooks(filteredBooks);
        });
    });

    //FAVOURITES - NONE
    //FORM
    const searchForm = document.getElementById("searchForm");
    const searchInput = document.getElementById("searchInput");

    searchForm.addEventListener("submit", function (event) {
        event.preventDefault();  // Prevent the default form submission

        const search = searchInput.value.trim().toLowerCase();

        // Filter books based on the search query (matching titles)
        let filteredBooks = allBooks.filter(book => {
            return (
                book.Title.toLowerCase().includes(search) ||
                book.Author.some(author => author.toLowerCase().includes(search)) || //author and category is an array
                book.Category.some(category => category.toLowerCase().includes(search))
            );
        });

        displayBooks(filteredBooks);  // Display the filtered books
    });

    </script>

<!--FOOTER-->
<footer class="footer" style="background-color: #F7CBB2; color: black; padding: 20px 0; text-align: center; border-top: 2px solid white;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <p>&copy; 2026 Preschool. All rights reserved.</p>
    <ul style="list-style: none; margin: 10px; padding: 0; display: flex; justify-content: center; gap: 15px;"> <!--Padding so contents stay centered-->
      <li><a href="https://www.capitalcitypreschool.co.nz/?gad_source=1&gad_campaignid=16510888253&gbraid=0AAAAABYbi-_ssmfiMoVHUwYAC4Z-lq6ef&gclid=Cj0KCQiAyP3KBhD9ARIsAAJLnnaB1Fp4BfK_Ghyd67LA6Z85W5gr06sTrH8PM86wcwfKsQeKECCOWaMaAgRBEALw_wcB" style="color: black; text-decoration: none;">Preschool</a></li>
      <li><a href="#" style="color: black; text-decoration: none;">Books</a></li>
      <li><a href="#" style="color: black; text-decoration: none;">Contact us</a></li>
    </ul>
    <div style="margin-top: 15px;">
      <a href="https://www.facebook.com/CapitalCityPreschool" style="color: black; margin: 0 5px;"><i class="bi bi-facebook"></i></a> 
      <a href="#" style="color: black; margin: 0 5px;"><i class="bi bi-messenger"></i></a> 
      <a href="#" style="color: black; margin: 0 5px;"><i class="bi bi-instagram"></i></a>
    </div>
  </div>
</footer>




  </body>
</html>