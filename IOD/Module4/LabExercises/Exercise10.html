<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Exercise 10: Fake E Commerce Website</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous"/>
  </head>
  <body>
    <h3 class="display-1 text-center mb-4">Fake E-Commerce</h3>

    <!--NAVBAR with DROPDOWN MENU-->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">Products</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="#">All</a></li>
                        <li><a class="dropdown-item" href="#">Women's Clothing</a></li>
                        <li><a class="dropdown-item" href="#">Men's Clothing</a></li>
                        <li><a class="dropdown-item" href="#">Jewelery</a></li>
                        <li><a class="dropdown-item" href="#">Electronics</a></li>
                    </ul>
                </li>
            </ul>
            </div>
        </div>
    </nav>


    <!--CARDS TEMPLATE-->
    <div class="container px-lg-5 my-5">
      <div class="row justify-content" id="product-list"></div>
    </div>

    <template id="product-template">
      <div class="col-12 col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <img src="" class="card-img-top img-fluid" style="height: 250px" />
            <div class="card-body d-flex flex-column flex-grow-1"> 
                <h5 class="card-title"></h5>
                <p class="card-text product-price"></p>
                <p class="card-text product-description"></p>
                <a href="#" class="btn btn-primary w-100 mt-auto">Purchase</a>
          </div>
        </div>
      </div>
    </template>
    <!--END CARDS TEMPLATE-->

    <!--SCRIPT-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

    <!--CARDS-->
    <script>
        let allProducts = [];

        function addProduct(productImage, productTitle, productPrice, productDescription) {
            const template = document.getElementById("product-template").content.cloneNode(true);
                template.querySelector(".card-img-top").src = productImage;
                template.querySelector(".card-title").innerText = productTitle;
                template.querySelector(".product-price").innerText = "$" + productPrice;
                template.querySelector(".product-description").innerText = productDescription; 

            document.querySelector("#product-list").appendChild(template);
        }

        function allProduct(products) { //display all products
            document.querySelector("#product-list").innerHTML = "";  //clear producsts
            products.forEach(product => addProduct(product.image, product.title, product.price, product.description));    //add each product
        }


    //FETCH products from FakeStore
        fetch("https://fakestoreapi.com/products?limit=10")
        .then((Response) => Response.json()) //extract the response
        .then((products) => {
            allProducts = products;
            products.forEach((product) => {
                addProduct(product.image, product.title, product.price, product.description);
          });
        });

    //FILTER PRODUCTS (Dropdown menu)
        const dropdownItems = document.querySelectorAll(".dropdown-item");
        dropdownItems.forEach (item => {
            item.addEventListener("click", function() {
            const text = this.innerText.toLowerCase();

        let category = "";
            if(category === "all") {
                filtered = products;
            }   
                else if (text.includes("women")) category ="women's clothing"; //i dont know why this is not working
                else if (text.includes("men")) category ="men's clothing";
                else if (text.includes("jewelery")) category ="jewelery";
                else if (text.includes("electronics")) category ="electronics";
                else category = "";

        let filteredProducts = allProducts;
        if (category !== "") {
            filteredProducts = allProducts.filter(product => product.category === category);
        }
        
        allProduct(filteredProducts);
        
        });
    });
                
        




    </script>


    
  </body>
</html>
