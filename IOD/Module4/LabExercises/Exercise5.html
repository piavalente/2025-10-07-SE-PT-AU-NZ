<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise 5: Manage Data 1 and 2</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <h1>Latest News</h1>
    <!--TEMPLATE-->
    <template id="news-template">
      <div class="card col-8" style="width: 18rem; margin: 10px">
        <div class="card-body">
          <h5 class="card-title">News title</h5>
          <p class="card-text">News content.</p>
        </div>
      </div>
    </template>
    <div id="news-list" class="row"></div>

    <!--FORM-->
    <form id="latestNews">
      <label>Title:</label><br />
      <input type="text" name="title" id="newsTitle" />
      <br />

      <label>Description:</label><br />
      <input type="text" name="description" id="newsDescription" />
      <br />
      <br />
      <input type="submit" value="Submit" />
    </form>
  </body>

  <script>
    const newsContainer = document.getElementById("news-list");

    let news = [
      {
        id: 1,
        title: "Election Results",
        content: "Newly elected minister...",
      },
      { id: 2, title: "Sporting Success", content: "World Cup winners..." },
      {
        id: 3,
        title: "Tornado Warning",
        content: "Residents should prepare...",
      },
    ];

    //clone...populate...append
    function addNews(news) {
      newsContainer.innerHTML = ""; //clear previous news

      news.forEach((news) => {
        //add each news using this template
        const template = document
          .getElementById("news-template")
          .content.cloneNode(true);
        template.querySelector(".card-title").innerText = news.title;
        template.querySelector(".card-text").innerText = news.content;
        document.querySelector("#news-list").appendChild(template);
      });
    }

    addNews(news);

    //FORM
    const form = document
      .getElementById("latestNews")
      .addEventListener("submit", function (event) {
        event.preventDefault(); //prevents FORM from refreshing

        //entering new value (latest news)
        const title = document.getElementById("newsTitle").value;
        const content = document.getElementById("newsDescription").value;

        if (title && content) {
          news.push({ title, content });

          if (news.length > 3) {
            news.shift();
          }

          addNews(news);

          //i can't get the 5 second interval
        }
      });
  </script>
</html>
